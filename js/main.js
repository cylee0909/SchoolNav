/**
 * Created by cylee on 2018/10/4.
 */

Array.prototype.indexOf = function (val) {
    for (var i = 0; i < this.length; i++) {
        if (this[i] == val) return i;
    }
    return -1;
};

Array.prototype.remove = function (val) {
    var index = this.indexOf(val);
    if (index > -1) {
        this.splice(index, 1);
    }
};

var desc = JSON.parse('["面积75亩，2001年开始建设，主要种植裸子植物。重要科有：银杏科、松科、杉科、柏科、三尖杉科、红豆杉科、罗汉松科。松柏园区的植物大多属于高大乔木，树姿雄伟，且多为珍稀或保护植物。","面积44亩，2001年开始建设，种植木兰亚纲部分植物。该区重要的科有：木兰科、樟科、八角科、五味子科、毛茛科、小檗科、木通科、罂粟科等。木兰园最佳观赏季节为春季，成片的白、紫玉兰将园区点缀为花的海洋，还有各类含笑做点缀。各种木兰、含笑散发出宜人的芳香，让人沉醉于其中。","面积91亩，种植蔷薇亚纲部分植物，2001年开始建设。重要科有：蔷薇科、豆科、冬青科、大戟科、鼠李科、山茱萸科、卫矛科、景天科、虎耳草科等。园区内春天垂丝海棠、西府海棠、粉花锈线菊、中华绣线菊、紫叶李等蔷薇科植物满园绽放，十分喧闹，秋冬季节各类石楠、冬青的果实红果累累，好不诱人。设有玫瑰广场、学海大草坪、月季园、蔷薇山、双梅苑、群芳谱、竹径、寻芳径、森禾园等。","面积65亩，2001年开始建设，种植五桠果亚纲部分植物，以杜鹃花科植物为特色，重要科有：杜鹃花科、柿树科、安息香科、山矾科、紫金牛科。杜鹃园种植的各类杜鹃在春季满园怒放，色彩缤纷；秋季各类柿子和越橘属植物的果实味道鲜美。设有杜鹃山、杜鹃谷。","面积99亩，2001年开始建设，种植金缕梅亚纲和石竹亚纲部分植物。重要科有：金缕梅科、榆科、桑科、胡桃科、壳斗科、桦木科、石竹科、蓼科等。金缕梅园区各类乔木树种郁郁葱葱，夏日树下荫凉清爽，十分宜人。","面积99亩，2001年开始建设。种植五桠果亚纲和石竹亚纲的部分植物，以山茶科植物为特色，重要的科主要包括山茶科、猕猴桃科、杜英科、梧桐科、锦葵科、堇菜科、杨柳科、十字花科、石竹科、蓼科等。园区内重要的观赏植物为山茶花、金丝桃等。初春时节，满园色彩鲜艳的山茶花开满园区，为学校增添了极好的景致。","面积30亩，2012年开始建设，以收集农作物和园艺作物种质资源为特色，重要的科主要包括禾本科、葫芦科、豆科、十字花科、百合科等农作物和园艺作物。","面积142亩，2011年开始建设，以收集珍稀植物、珍贵植物、天目山特色植物和药用植物种质资源为特色，含珍稀植物区、本草区、天目山特色植物区等。","面积86亩，2001年开始建设，位于学生公寓B区附近区域，主要种植部分菊亚纲植物，以木犀科植物为特色，重要科有：木犀科、忍冬科、玄参科、茜草科、紫草科、茄科、夹竹桃科、旋花科、马鞭草科、唇形科和菊科等。该园区3月可观赏成片的金钟花，9-10月为各品种桂花竞相开放的时节，丹桂、金桂、银桂、四季桂等花开满园，浓香馥郁，醉人心脾，为主要的观赏季节。","面积96亩，2001年开始建设，主要种植禾本科竹亚科植物为主。翠竹园曲径通幽，竹叶婆娑秀美，斑竹、紫珠杆色奇特，凤尾竹、茶杆竹、方竹枝叶秀丽，龟甲竹、辣韭矢竹枝干怪异，各具姿态。","面积33亩，2001年开始建设，种植蔷薇亚纲部分科属植物，以槭树科植物为特色。突出秋色叶景观。重要科有：省沽油科、无患子科、七叶树科、槭树科、漆树科、芸香科、伞形科、五加科等。该园区现规划出一处花境区域，种植各类园艺植物，四季均可观赏。其他区域主要可供观赏的植物为槭属植物和漆树科部分植物，深秋季节，这些植物色彩斑斓，是主要的观赏季节。设有绚秋阁、寻秋径。","面积10亩，2001年开始建设，2011年对规划区域进行调整优化，主要收集棕榈科植物为特色，含温州园，位于东湖东北侧，槭树园以南。","面积17亩，含含蕨园、岩石园、藤园和牡丹园等，是盆景植物、造型植物、蕨类植物、岩生植物、藤本植物主要收集基地，设盆景流派、浙江盆景、大型盆景等展示区。","面积137亩，2005年开始建设，经济果木、水果种质资源收集和教学基地。","面积54亩，2011年开始建设，收集国内外特色名花和花卉新品种，含校大门口、行政楼周边。","面积5亩，2003年开始建设，以收集香花植物、香草植物和花卉新品种为特色，位于东湖茶室周边。","面积108亩，2001年开始建设，收集水湿生植物为特色，东湖水域和官塘水域。","面积38亩，2001年开始建设，2011年调整优化，含院士林、领导专家林、名人纪念林、国际友谊林、校友林等，作为院士、主要领导、名人和国际友人来校植树的基地。","面积106亩，2012年开始建设，以收集重要文学著作中的植物，打造富于人文景观的特色园，含学院楼教学楼、学生活动中心等三处。","面积32亩，2012年开始建设，收集可用来制作以茶为主的特色饮料植物，含茶文化楼（生态文化研究中心）、名优绿茶品种区、名优花茶品种区、其它制茶植物区、茶文化体验区、茗湖、品茗轩、闻茗亭、陆羽雕塑等。"]');
var data = JSON.parse('[{"name":"松柏园","id":1,"p":[[[119.725406,30.256535],[119.725267,30.256415],[119.725117,30.256294],[119.724988,30.256165],[119.72487,30.256035],[119.724752,30.255896],[119.724634,30.255748],[119.724548,30.255627],[119.72443,30.255507],[119.724301,30.255377],[119.724366,30.255229],[119.724419,30.255071],[119.724441,30.254904],[119.724516,30.254756],[119.724548,30.25458],[119.72458,30.25445],[119.724645,30.254293],[119.724698,30.254117],[119.724741,30.25395],[119.724816,30.253811],[119.724891,30.253672],[119.724972,30.253514],[119.725058,30.253366],[119.725143,30.253227],[119.725208,30.253088],[119.725272,30.252949],[119.725337,30.252838],[119.725412,30.252754],[119.725455,30.252624],[119.725519,30.252458],[119.725605,30.252328],[119.72568,30.252198],[119.725755,30.252096],[119.725819,30.25192],[119.725916,30.251781],[119.726066,30.251624],[119.726184,30.25154],[119.726313,30.251438],[119.726485,30.251373],[119.726667,30.251345],[119.726817,30.251336],[119.726967,30.251327],[119.727139,30.251327],[119.727321,30.251327],[119.727482,30.251327],[119.727686,30.251299],[119.727858,30.25129],[119.728029,30.251271],[119.728212,30.251253],[119.728373,30.251225],[119.728523,30.251225],[119.728727,30.251197],[119.72892,30.251151],[119.729145,30.251095],[119.729306,30.251077],[119.729392,30.251179],[119.729553,30.251262],[119.729714,30.251327],[119.729768,30.251438],[119.729778,30.251559],[119.729789,30.251725],[119.7298,30.251892],[119.729789,30.252078],[119.729768,30.25218],[119.729585,30.252189],[119.729392,30.25218],[119.72922,30.252189],[119.72907,30.252161],[119.728888,30.25217],[119.728866,30.251966],[119.728856,30.2518],[119.728834,30.251614],[119.728673,30.251559],[119.72848,30.251549],[119.728308,30.251549],[119.728147,30.25154],[119.727997,30.251559],[119.727826,30.251577],[119.727665,30.251568],[119.727504,30.251559],[119.727321,30.251559],[119.727182,30.251577],[119.726999,30.251577],[119.72686,30.251605],[119.726731,30.251596],[119.72671,30.251716],[119.726742,30.251855],[119.726699,30.252004],[119.726721,30.252152],[119.72671,30.252328],[119.726721,30.252504],[119.726624,30.252606],[119.726581,30.252717],[119.726517,30.25281],[119.726452,30.252958],[119.726334,30.253051],[119.726163,30.253134],[119.726023,30.253199],[119.725905,30.25331],[119.725819,30.253431],[119.725691,30.253533],[119.725594,30.253672],[119.72554,30.253792],[119.725465,30.253931],[119.725476,30.254089],[119.725401,30.254163],[119.725261,30.254228],[119.725154,30.254274],[119.724993,30.254293],[119.724864,30.254311],[119.724832,30.254432],[119.724832,30.254561],[119.724843,30.2547],[119.724832,30.254821],[119.724822,30.254978],[119.724832,30.255127],[119.724843,30.255256],[119.724832,30.255414],[119.724843,30.255544],[119.724832,30.255683],[119.724843,30.255794],[119.724993,30.255785],[119.725143,30.255803],[119.725176,30.255933],[119.725186,30.256063],[119.725315,30.256137],[119.725326,30.256239],[119.725444,30.256248],[119.725444,30.256359],[119.725444,30.256452]]]},{"name":"木兰园","id":2,"p":[[[119.728834,30.252634],[119.728689,30.252643],[119.72855,30.252629],[119.728389,30.252634],[119.728217,30.252629],[119.728056,30.25262],[119.727911,30.252624],[119.727852,30.252532],[119.727702,30.252518],[119.727681,30.252629],[119.72767,30.25275],[119.727665,30.252875],[119.727665,30.252995],[119.727665,30.25312],[119.727654,30.253227],[119.727675,30.253333],[119.727659,30.25344],[119.727557,30.253519],[119.727654,30.253588],[119.727692,30.253686],[119.727734,30.253792],[119.727751,30.253894],[119.727718,30.254028],[119.727708,30.25413],[119.72774,30.254242],[119.727852,30.254209],[119.72796,30.254168],[119.728072,30.254154],[119.728185,30.254126],[119.728298,30.254093],[119.728432,30.254052],[119.728555,30.254019],[119.728673,30.253973],[119.72877,30.253922],[119.72885,30.253857],[119.728947,30.253741],[119.729027,30.253639],[119.729054,30.253547],[119.729118,30.253482],[119.729236,30.253459],[119.729365,30.253454],[119.729472,30.253431],[119.729499,30.253347],[119.729515,30.253241],[119.729569,30.253139],[119.729628,30.253046],[119.729709,30.252977],[119.729768,30.252921],[119.729784,30.252796],[119.729784,30.252685],[119.729789,30.252569],[119.729789,30.252453],[119.729794,30.252342],[119.729692,30.2523],[119.729569,30.252295],[119.729408,30.252309],[119.729247,30.252295],[119.729092,30.252295],[119.72892,30.252295],[119.728823,30.252309],[119.728823,30.252411],[119.728834,30.252527]]]},{"name":"蔷薇园","id":3,"p":[[[119.728968,30.257416],[119.728818,30.257425],[119.728657,30.257425],[119.728496,30.257453],[119.728346,30.257444],[119.728164,30.257425],[119.727992,30.257444],[119.727852,30.257434],[119.727692,30.257406],[119.727509,30.257397],[119.727316,30.25736],[119.727166,30.257351],[119.727048,30.257323],[119.726898,30.257277],[119.726758,30.25723],[119.726619,30.257184],[119.726468,30.257147],[119.726318,30.257101],[119.726157,30.257027],[119.726029,30.256962],[119.725911,30.256915],[119.725857,30.256786],[119.725717,30.256711],[119.725793,30.256572],[119.725825,30.256424],[119.725825,30.256276],[119.725803,30.256137],[119.725857,30.256026],[119.725943,30.255951],[119.725964,30.25584],[119.726104,30.255822],[119.726254,30.255775],[119.72634,30.255673],[119.72635,30.255534],[119.726361,30.255377],[119.72634,30.255229],[119.72635,30.25509],[119.72635,30.254941],[119.72635,30.254802],[119.726361,30.254654],[119.72635,30.254515],[119.72634,30.254376],[119.726479,30.254339],[119.726619,30.25433],[119.726737,30.25432],[119.72678,30.254172],[119.726865,30.254033],[119.726973,30.253913],[119.72708,30.253811],[119.727198,30.253699],[119.727337,30.253625],[119.727488,30.253542],[119.727584,30.253486],[119.72767,30.253579],[119.727734,30.253681],[119.727767,30.253811],[119.727745,30.25395],[119.727724,30.254089],[119.727745,30.254237],[119.727724,30.25433],[119.727681,30.254459],[119.727638,30.254598],[119.727649,30.254737],[119.727616,30.254867],[119.727531,30.254969],[119.727488,30.25509],[119.727402,30.255192],[119.727445,30.255275],[119.727584,30.255219],[119.727756,30.25521],[119.727906,30.255256],[119.728046,30.255303],[119.728142,30.255386],[119.728249,30.255488],[119.728335,30.255599],[119.728421,30.255701],[119.728561,30.255738],[119.728711,30.255729],[119.72885,30.255729],[119.72899,30.255701],[119.729151,30.255664],[119.729269,30.255627],[119.729387,30.255609],[119.729526,30.25559],[119.729676,30.255572],[119.729837,30.25559],[119.729633,30.255655],[119.72944,30.255701],[119.729312,30.255766],[119.729194,30.25585],[119.729076,30.255951],[119.728968,30.256053],[119.728882,30.256165],[119.728743,30.256248],[119.728593,30.256331],[119.728636,30.25647],[119.728614,30.256628],[119.728561,30.25673],[119.728475,30.256813],[119.728453,30.256925],[119.72855,30.257008],[119.728625,30.257101],[119.728689,30.257166],[119.728797,30.257249],[119.728915,30.257305]]]},{"name":"杜鹃园","id":4,"p":[[[119.727048,30.259783],[119.727246,30.259797],[119.72745,30.259797],[119.727557,30.259691],[119.727638,30.259556],[119.727713,30.259441],[119.727783,30.259315],[119.727858,30.259209],[119.727933,30.259061],[119.727976,30.258894],[119.727911,30.258759],[119.727783,30.258671],[119.72767,30.258565],[119.727547,30.258477],[119.727354,30.258472],[119.727187,30.258477],[119.726997,30.258491],[119.726831,30.258481],[119.726696,30.258393],[119.726594,30.258296],[119.726503,30.258203],[119.726552,30.258083],[119.726653,30.257953],[119.726755,30.257856],[119.726863,30.257745],[119.726981,30.25762],[119.727067,30.257499],[119.727126,30.257406],[119.726938,30.257369],[119.726755,30.257332],[119.726557,30.257291],[119.726353,30.257198],[119.726165,30.257133],[119.725994,30.257054],[119.725817,30.256971],[119.725624,30.256994],[119.725489,30.257096],[119.725334,30.257235],[119.725216,30.257411],[119.725109,30.257532],[119.72498,30.257661],[119.724856,30.257791],[119.724744,30.257958],[119.724626,30.258092],[119.724524,30.258213],[119.724626,30.258287],[119.724781,30.258329],[119.724953,30.25838],[119.725146,30.25843],[119.725323,30.258472],[119.725489,30.258514],[119.725688,30.258537],[119.725854,30.258588],[119.726042,30.258634],[119.7262,30.258722],[119.726318,30.258861],[119.726404,30.258982],[119.726468,30.259102],[119.726597,30.259288],[119.726672,30.259445],[119.726801,30.259603],[119.72693,30.259705]]]},{"name":"金缕梅园","id":5,"p":[[[119.722263,30.259084],[119.722349,30.258991],[119.722456,30.258871],[119.722585,30.258732],[119.72267,30.258593],[119.722756,30.258481],[119.72281,30.258398],[119.722896,30.258296],[119.723132,30.258241],[119.723282,30.258231],[119.723486,30.258213],[119.723647,30.258213],[119.723818,30.258194],[119.724022,30.258176],[119.72414,30.258102],[119.72413,30.257935],[119.724108,30.257777],[119.72413,30.257638],[119.724151,30.257425],[119.724344,30.257406],[119.724559,30.257397],[119.724768,30.257402],[119.72494,30.257439],[119.725058,30.257495],[119.725186,30.257369],[119.725267,30.2573],[119.725379,30.257193],[119.725481,30.257022],[119.725492,30.256864],[119.725438,30.256748],[119.725315,30.256614],[119.725154,30.256508],[119.725015,30.256387],[119.724875,30.256239],[119.72473,30.2561],[119.724618,30.255965],[119.724478,30.255836],[119.724344,30.255683],[119.72421,30.255558],[119.724092,30.255585],[119.723979,30.255697],[119.723867,30.25578],[119.723749,30.255854],[119.723631,30.255933],[119.723513,30.256016],[119.723421,30.256077],[119.723341,30.256179],[119.723234,30.256276],[119.723137,30.256387],[119.723046,30.256484],[119.722939,30.256577],[119.722858,30.256674],[119.722778,30.256781],[119.722681,30.256878],[119.722601,30.256971],[119.722526,30.257054],[119.722445,30.257138],[119.722359,30.25724],[119.722295,30.257323],[119.722214,30.257444],[119.722145,30.257541],[119.722064,30.257629],[119.721978,30.257722],[119.721898,30.257819],[119.721828,30.257912],[119.721716,30.258032],[119.72164,30.258125],[119.721571,30.258217],[119.721485,30.258305],[119.721394,30.258417],[119.721308,30.258509],[119.721233,30.258607],[119.721158,30.258709],[119.721088,30.258787],[119.721013,30.258889],[119.720895,30.258982],[119.720793,30.259065],[119.720948,30.25913],[119.721142,30.259098],[119.721329,30.259093],[119.721485,30.259093],[119.72163,30.259093],[119.721764,30.259088],[119.721919,30.259098],[119.722091,30.259098]]]},{"name":"山茶园","id":6,"p":[[[119.720653,30.262494],[119.720847,30.262522],[119.721029,30.262559],[119.721243,30.262605],[119.721394,30.262596],[119.721576,30.262605],[119.721758,30.262661],[119.721941,30.26267],[119.722134,30.262698],[119.722295,30.26267],[119.72237,30.26254],[119.72237,30.262374],[119.72237,30.262272],[119.72237,30.262105],[119.722381,30.261994],[119.722306,30.261827],[119.722273,30.261669],[119.722188,30.261484],[119.722177,30.261289],[119.722166,30.261141],[119.722145,30.260965],[119.722107,30.260761],[119.722118,30.260576],[119.722086,30.260446],[119.722107,30.260344],[119.722118,30.260168],[119.722107,30.26002],[119.722129,30.259862],[119.722107,30.259686],[119.722139,30.259529],[119.722107,30.259343],[119.722096,30.259158],[119.721893,30.259102],[119.721689,30.25913],[119.721453,30.259102],[119.721249,30.259102],[119.721013,30.259102],[119.72083,30.259112],[119.720702,30.259223],[119.720573,30.259371],[119.720476,30.259519],[119.720369,30.259649],[119.720294,30.259853],[119.720219,30.260011],[119.720197,30.260187],[119.720187,30.260372],[119.720165,30.260557],[119.720208,30.260761],[119.720208,30.260919],[119.72024,30.261085],[119.720315,30.261252],[119.72038,30.261447],[119.720444,30.26166],[119.720519,30.261836],[119.720573,30.261984],[119.720605,30.26216],[119.720616,30.262374]]]},{"name":"农作园","id":7,"p":[[[119.722263,30.260733],[119.722252,30.260557],[119.722273,30.260344],[119.722284,30.260168],[119.722316,30.26002],[119.722477,30.26002],[119.72266,30.260048],[119.722853,30.260048],[119.723057,30.260057],[119.723293,30.260048],[119.723486,30.260066],[119.723657,30.260075],[119.723572,30.260214],[119.723604,30.260381],[119.723598,30.260539],[119.723604,30.260687],[119.723593,30.260845],[119.723604,30.260974],[119.723604,30.26115],[119.723604,30.261299],[119.723615,30.261447],[119.723615,30.261604],[119.72355,30.261688],[119.7234,30.261734],[119.723239,30.261753],[119.723078,30.261781],[119.722896,30.261781],[119.722746,30.261753],[119.722617,30.261706],[119.722499,30.261651],[119.722391,30.261567],[119.722306,30.261447],[119.722252,30.261317],[119.72222,30.261206],[119.722231,30.261076],[119.722241,30.260891]]]},{"name":"天目园","id":8,"p":[[[119.728491,30.262262],[119.72863,30.262364],[119.728813,30.26242],[119.729027,30.262476],[119.729145,30.262513],[119.729135,30.262707],[119.729102,30.262893],[119.729027,30.263069],[119.72892,30.263198],[119.728759,30.263263],[119.728598,30.26331],[119.728394,30.263217],[119.728255,30.263124],[119.728019,30.263059],[119.727826,30.263032],[119.727622,30.262967],[119.727396,30.262911],[119.727139,30.262846],[119.726946,30.262893],[119.726785,30.263004],[119.726581,30.263143],[119.726366,30.263189],[119.726163,30.263263],[119.725937,30.263263],[119.725733,30.263254],[119.725519,30.263208],[119.725251,30.263161],[119.725068,30.263161],[119.724907,30.263143],[119.724725,30.263115],[119.724532,30.263087],[119.724307,30.263059],[119.724146,30.263022],[119.723953,30.262967],[119.723716,30.262939],[119.723513,30.262902],[119.723309,30.262883],[119.723126,30.262855],[119.722901,30.262837],[119.722708,30.262809],[119.722536,30.262772],[119.722306,30.262726],[119.722145,30.262698],[119.722349,30.262577],[119.722424,30.262466],[119.722381,30.262346],[119.722391,30.262253],[119.722402,30.262096],[119.722424,30.261984],[119.722488,30.261864],[119.72266,30.261771],[119.722874,30.261771],[119.723078,30.261762],[119.72326,30.261762],[119.723475,30.261743],[119.72369,30.261716],[119.723872,30.261697],[119.724065,30.261632],[119.724226,30.261577],[119.724366,30.261484],[119.724569,30.261521],[119.72472,30.261642],[119.724848,30.261762],[119.725063,30.261725],[119.725192,30.261818],[119.72517,30.261994],[119.725235,30.26216],[119.725438,30.262188],[119.725642,30.262207],[119.725911,30.262207],[119.726093,30.26217],[119.726329,30.262133],[119.726544,30.262123],[119.726565,30.261938],[119.726479,30.261771],[119.726426,30.261623],[119.726318,30.261475],[119.726243,30.261308],[119.726232,30.261169],[119.726383,30.261076],[119.726576,30.261021],[119.72678,30.260946],[119.726908,30.260845],[119.727016,30.260706],[119.727134,30.260557],[119.727177,30.260381],[119.727219,30.260214],[119.727241,30.260066],[119.727359,30.259992],[119.727541,30.260011],[119.727681,30.260159],[119.727745,30.260298],[119.72781,30.260465],[119.727874,30.260594],[119.727928,30.260743],[119.72796,30.260882],[119.728024,30.26103],[119.728078,30.26115],[119.728153,30.261317],[119.728196,30.261475],[119.728206,30.261642],[119.728196,30.261762],[119.728249,30.261864],[119.728292,30.261984],[119.728389,30.262133]]]},{"name":"桂花园","id":9,"p":[[[119.725192,30.262188],[119.725385,30.262198],[119.72561,30.262207],[119.725835,30.262198],[119.725996,30.262188],[119.726254,30.262188],[119.72649,30.26216],[119.726586,30.26204],[119.726554,30.26191],[119.726565,30.261743],[119.726447,30.261614],[119.726361,30.261438],[119.726307,30.261271],[119.726297,30.261085],[119.726415,30.260928],[119.726586,30.260817],[119.726769,30.26077],[119.727005,30.260696],[119.727112,30.260622],[119.727198,30.260483],[119.727177,30.260326],[119.727193,30.26014],[119.727225,30.259983],[119.727203,30.259807],[119.72701,30.259742],[119.726839,30.259668],[119.726721,30.259529],[119.726603,30.259371],[119.726517,30.259214],[119.726442,30.259047],[119.726356,30.258889],[119.726259,30.25875],[119.726088,30.258667],[119.725905,30.258685],[119.725723,30.258611],[119.725605,30.258713],[119.725605,30.258908],[119.725476,30.258945],[119.725326,30.258926],[119.725304,30.259102],[119.725294,30.259269],[119.725111,30.25926],[119.725068,30.259353],[119.725068,30.25951],[119.725058,30.259631],[119.72494,30.259733],[119.724864,30.259853],[119.724789,30.259946],[119.724725,30.260085],[119.724661,30.260224],[119.724671,30.260372],[119.724671,30.260548],[119.724671,30.260715],[119.724543,30.260752],[119.724467,30.260835],[119.7245,30.261048],[119.72436,30.261085],[119.724189,30.261067],[119.724124,30.261187],[119.724124,30.261363],[119.724146,30.261484],[119.724285,30.261465],[119.724435,30.261521],[119.72465,30.261595],[119.724811,30.261734],[119.724993,30.261734],[119.725154,30.261762],[119.725165,30.261901],[119.725165,30.262086]]]},{"name":"翠竹园","id":10,"p":[[[119.730975,30.25863],[119.731135,30.258574],[119.731318,30.258528],[119.731532,30.258481],[119.731747,30.258444],[119.731962,30.258389],[119.732149,30.258305],[119.732353,30.258203],[119.732546,30.258074],[119.732707,30.257962],[119.732857,30.257823],[119.732975,30.257666],[119.733126,30.257527],[119.733244,30.257379],[119.733319,30.257184],[119.733372,30.257017],[119.733523,30.256989],[119.733641,30.257091],[119.73378,30.257193],[119.733855,30.257332],[119.733844,30.257508],[119.733769,30.257694],[119.733726,30.257888],[119.733769,30.258083],[119.733769,30.258287],[119.73378,30.258472],[119.733769,30.25862],[119.733726,30.258815],[119.733737,30.259],[119.733759,30.259186],[119.733812,30.259353],[119.733834,30.259547],[119.733855,30.259677],[119.733684,30.25976],[119.733501,30.259816],[119.733308,30.259862],[119.733104,30.25989],[119.7329,30.259918],[119.732718,30.259927],[119.732428,30.259955],[119.732257,30.259973],[119.732064,30.259973],[119.73186,30.259973],[119.731602,30.260001],[119.731388,30.260029],[119.731162,30.260048],[119.73098,30.260075],[119.730808,30.260112],[119.730594,30.260187],[119.730395,30.260214],[119.730417,30.26002],[119.730395,30.259853],[119.730406,30.259668],[119.730417,30.259492],[119.730224,30.259501],[119.730052,30.259529],[119.730116,30.259325],[119.730213,30.259158],[119.730309,30.259028],[119.730449,30.25888],[119.73061,30.258778],[119.730781,30.258713]]]},{"name":"槭树园","id":11,"p":[[[119.72892,30.256114],[119.729022,30.256225],[119.729124,30.256327],[119.729102,30.25648],[119.729086,30.256623],[119.729076,30.256772],[119.729076,30.256901],[119.729135,30.25704],[119.729242,30.257138],[119.729381,30.257152],[119.729532,30.257133],[119.729682,30.25711],[119.729805,30.257068],[119.729934,30.257003],[119.730052,30.256952],[119.730143,30.257054],[119.73025,30.257091],[119.730368,30.257003],[119.730454,30.256887],[119.730567,30.256813],[119.730647,30.256707],[119.730714,30.256596],[119.730789,30.25648],[119.730865,30.256345],[119.730918,30.256239],[119.730822,30.256151],[119.730693,30.256132],[119.730462,30.256063],[119.730328,30.255998],[119.730237,30.255873],[119.730162,30.255757],[119.729996,30.255678],[119.72984,30.255655],[119.729631,30.25565],[119.729486,30.255692],[119.72932,30.255785],[119.729191,30.255877],[119.729084,30.255961],[119.728998,30.25603]]]},{"name":"棕榈园","id":12,"p":[[[119.729714,30.255585],[119.729698,30.255678],[119.729821,30.255706],[119.729966,30.255743],[119.730105,30.255785],[119.730181,30.255901],[119.73025,30.256007],[119.730336,30.256072],[119.730438,30.256132],[119.730578,30.256179],[119.730706,30.256174],[119.730819,30.256165],[119.730932,30.256165],[119.731017,30.256044],[119.731039,30.255924],[119.731082,30.25578],[119.73106,30.255636],[119.73105,30.255502],[119.731039,30.255363],[119.73098,30.255215],[119.73091,30.255085],[119.730859,30.254941],[119.730795,30.254816],[119.730671,30.254793],[119.730645,30.254909],[119.730709,30.255039],[119.730747,30.255164],[119.730811,30.25528],[119.730859,30.255409],[119.730913,30.25553],[119.730929,30.255683],[119.730897,30.255822],[119.730832,30.255965],[119.730709,30.256044],[119.73057,30.256021],[119.730473,30.255965],[119.730382,30.255891],[119.730291,30.255775],[119.730189,30.255687],[119.730049,30.255627],[119.729926,30.255585]]]},{"name":"盆景园","id":13,"p":[[[119.732895,30.255006],[119.732959,30.255154],[119.733099,30.25534],[119.733271,30.255479],[119.73341,30.25559],[119.733528,30.255599],[119.733528,30.255451],[119.733507,30.255331],[119.733485,30.255154],[119.733474,30.254978],[119.733453,30.254821],[119.733453,30.254673],[119.733431,30.254506],[119.733421,30.25432],[119.733367,30.254144],[119.733292,30.253922],[119.733217,30.253727],[119.73311,30.25357],[119.733013,30.253421],[119.73282,30.253394],[119.732638,30.253357],[119.732471,30.253366],[119.73231,30.253431],[119.732214,30.253514],[119.732224,30.253653],[119.732214,30.253783],[119.732214,30.25394],[119.732332,30.254089],[119.73246,30.254079],[119.732654,30.25407],[119.732836,30.254098],[119.732868,30.254274],[119.732868,30.254422],[119.732868,30.254571],[119.732922,30.254747],[119.73289,30.254904]]]},{"name":"果木园","id":14,"p":[[[119.733034,30.250029],[119.733024,30.250215],[119.733045,30.250391],[119.733034,30.250604],[119.733024,30.25078],[119.733002,30.250993],[119.733002,30.251188],[119.73297,30.251355],[119.732874,30.251494],[119.73267,30.251531],[119.732455,30.251549],[119.732316,30.251614],[119.732123,30.251651],[119.731919,30.251688],[119.731715,30.251763],[119.731565,30.251892],[119.731532,30.25205],[119.731479,30.25218],[119.731447,30.252365],[119.731457,30.252597],[119.731532,30.252773],[119.731645,30.252875],[119.731742,30.252995],[119.731849,30.253116],[119.731978,30.253218],[119.732128,30.253301],[119.732214,30.253384],[119.732396,30.253366],[119.7326,30.253338],[119.73275,30.253357],[119.732943,30.253375],[119.733083,30.253375],[119.733254,30.253431],[119.733448,30.253431],[119.733641,30.253459],[119.733877,30.253431],[119.734091,30.25344],[119.734317,30.253449],[119.734499,30.253468],[119.734638,30.253514],[119.734778,30.253551],[119.734874,30.253588],[119.734928,30.253496],[119.734928,30.253292],[119.734928,30.253069],[119.734885,30.252958],[119.734874,30.252828],[119.734853,30.252717],[119.734821,30.252597],[119.734799,30.252402],[119.734789,30.252207],[119.734746,30.252041],[119.734724,30.251883],[119.734724,30.251725],[119.734692,30.251549],[119.734638,30.251345],[119.734617,30.251169],[119.734574,30.250947],[119.734531,30.25078],[119.734488,30.250604],[119.734435,30.250419],[119.734402,30.250224],[119.73437,30.250029],[119.734338,30.249844],[119.734306,30.249659],[119.734231,30.249492],[119.734166,30.249399],[119.734005,30.249473],[119.733866,30.249575],[119.733694,30.249659],[119.733533,30.249733],[119.733362,30.249788],[119.733211,30.249863],[119.733093,30.249909]]]},{"name":"名花园","id":15,"p":[[[119.731447,30.252634],[119.731243,30.252662],[119.73105,30.252597],[119.730857,30.252615],[119.730653,30.252587],[119.730535,30.252615],[119.730342,30.252606],[119.730256,30.252513],[119.730266,30.252356],[119.730256,30.25218],[119.730245,30.251994],[119.730234,30.251818],[119.730224,30.251614],[119.730202,30.251447],[119.730116,30.251383],[119.729923,30.251355],[119.72973,30.251355],[119.729558,30.251244],[119.729387,30.251105],[119.729505,30.250993],[119.729655,30.250975],[119.729832,30.25091],[119.730014,30.250891],[119.730207,30.250826],[119.73039,30.250771],[119.730594,30.250706],[119.730765,30.250669],[119.730916,30.250623],[119.731066,30.250613],[119.731248,30.250567],[119.731388,30.250539],[119.731484,30.250493],[119.73172,30.250447],[119.731935,30.2504],[119.732064,30.250335],[119.732214,30.25028],[119.732364,30.250243],[119.732525,30.250187],[119.732664,30.250141],[119.732793,30.250122],[119.732965,30.250057],[119.733104,30.250011],[119.733072,30.250215],[119.733051,30.250391],[119.733061,30.250567],[119.733061,30.250743],[119.733072,30.250882],[119.733051,30.251049],[119.733051,30.251179],[119.733018,30.251308],[119.732933,30.251457],[119.732782,30.251531],[119.732568,30.251577],[119.732385,30.251596],[119.732224,30.251633],[119.732074,30.251651],[119.731913,30.251698],[119.731752,30.251753],[119.731645,30.251855],[119.731549,30.251994],[119.731506,30.252124],[119.731473,30.252282],[119.731484,30.252458]]]},{"name":"香花园","id":16,"p":[[[119.730626,30.254733],[119.730728,30.254705],[119.730706,30.254585],[119.730658,30.254487],[119.730599,30.254362],[119.73054,30.254223],[119.730443,30.254079],[119.730363,30.253964],[119.730299,30.253825],[119.730175,30.253764],[119.730052,30.253857],[119.729998,30.253959],[119.729982,30.254061],[119.729977,30.254163],[119.730025,30.254265],[119.730154,30.254302],[119.730272,30.254385],[119.730352,30.25451],[119.73047,30.254575],[119.730556,30.254654]]]},{"name":"水景园","id":17,"p":[[[119.724253,30.263022],[119.72429,30.262911],[119.72413,30.26286],[119.723985,30.262818],[119.723851,30.262777],[119.723722,30.262698],[119.723652,30.262587],[119.723679,30.262443],[119.723706,30.262299],[119.723711,30.262151],[119.723786,30.262026],[119.723845,30.261947],[119.723942,30.261882],[119.724103,30.261827],[119.724269,30.261697],[119.724419,30.261669],[119.724548,30.261753],[119.724704,30.261818],[119.724875,30.261882],[119.724982,30.261975],[119.725047,30.262082],[119.725076,30.262248],[119.725028,30.262401],[119.724953,30.262554],[119.724915,30.262698],[119.724846,30.262846],[119.724706,30.262893],[119.72454,30.262902],[119.724411,30.262934]],[[119.727273,30.255386],[119.727337,30.255229],[119.727423,30.255108],[119.727509,30.254951],[119.727616,30.254784],[119.727638,30.254589],[119.727638,30.254385],[119.727756,30.254274],[119.727992,30.254191],[119.728164,30.254135],[119.728367,30.254079],[119.72855,30.254015],[119.7287,30.25395],[119.72885,30.25382],[119.728979,30.253662],[119.729054,30.253533],[119.729258,30.253496],[119.729333,30.253607],[119.729408,30.253811],[119.729483,30.253959],[119.729644,30.25407],[119.729789,30.254144],[119.729971,30.254218],[119.730186,30.254302],[119.730293,30.254413],[119.73039,30.254543],[119.730551,30.254598],[119.730615,30.254747],[119.730679,30.254886],[119.730701,30.255062],[119.730744,30.255247],[119.730873,30.255358],[119.730883,30.255516],[119.73084,30.255711],[119.730765,30.255812],[119.730679,30.255933],[119.730561,30.256035],[119.730443,30.256081],[119.730315,30.256007],[119.73024,30.25585],[119.730111,30.255692],[119.72995,30.255655],[119.72981,30.255609],[119.729617,30.255599],[119.729413,30.25559],[119.729242,30.255636],[119.729006,30.255683],[119.728823,30.255729],[119.728662,30.255738],[119.728459,30.25572],[119.728319,30.255618],[119.728223,30.255516],[119.728115,30.255395],[119.728019,30.255284],[119.727879,30.25521],[119.727675,30.25521],[119.727547,30.255275],[119.727396,30.255368]]]},{"name":"文化林","id":18,"p":[[[119.728603,30.256341],[119.728721,30.256276],[119.728872,30.256165],[119.72899,30.256202],[119.729097,30.256313],[119.729086,30.25648],[119.729022,30.256693],[119.729022,30.256906],[119.72914,30.257073],[119.729301,30.257128],[119.729505,30.257091],[119.729698,30.257064],[119.729891,30.257008],[119.730073,30.256962],[119.730224,30.257027],[119.73032,30.257156],[119.73046,30.257101],[119.730588,30.256999],[119.730728,30.256878],[119.730867,30.256952],[119.731017,30.257119],[119.730819,30.257184],[119.730679,30.25724],[119.730787,30.257342],[119.730894,30.257499],[119.731023,30.257647],[119.731152,30.257805],[119.731259,30.257981],[119.731334,30.258129],[119.731441,30.258296],[119.731495,30.258444],[119.731334,30.258444],[119.731141,30.258491],[119.730937,30.258583],[119.730776,30.258695],[119.730561,30.25862],[119.730465,30.258426],[119.730368,30.258268],[119.730272,30.258129],[119.730089,30.258185],[119.729907,30.258278],[119.729714,30.25837],[119.729553,30.258491],[119.729381,30.25862],[119.729263,30.258695],[119.729135,30.258565],[119.72907,30.25838],[119.729102,30.258222],[119.729102,30.258083],[119.729081,30.25799],[119.72907,30.257851],[119.72907,30.257675],[119.72907,30.257508],[119.728931,30.257379],[119.728813,30.257277],[119.728684,30.257156],[119.728544,30.257045],[119.72848,30.256906],[119.728469,30.256795],[119.728544,30.256702],[119.728577,30.256591],[119.728566,30.25647]]]},{"name":"文学花园","id":19,"p":[[[119.730771,30.256813],[119.730932,30.256952],[119.731017,30.257101],[119.7312,30.257156],[119.731393,30.257166],[119.731586,30.257147],[119.731758,30.257128],[119.73194,30.257119],[119.732165,30.257101],[119.732337,30.257128],[119.732552,30.257119],[119.732756,30.257119],[119.732959,30.257119],[119.733174,30.257101],[119.733292,30.25698],[119.733313,30.256813],[119.733324,30.256656],[119.733346,30.256489],[119.733367,30.256304],[119.73341,30.256165],[119.733474,30.256044],[119.733523,30.255942],[119.733469,30.255812],[119.733158,30.255877],[119.733308,30.25584],[119.732943,30.255859],[119.732761,30.255831],[119.732589,30.255822],[119.732407,30.255794],[119.732192,30.255822],[119.731988,30.255794],[119.731774,30.255822],[119.73157,30.255822],[119.731334,30.255812],[119.731184,30.255812],[119.731087,30.255933],[119.731087,30.256109],[119.731055,30.256294],[119.73098,30.256424],[119.730905,30.256554],[119.730776,30.256711]],[[119.731082,30.255015],[119.731275,30.254997],[119.73149,30.254978],[119.73165,30.254969],[119.731822,30.254988],[119.732037,30.25496],[119.732273,30.254988],[119.732487,30.254969],[119.73267,30.254969],[119.732863,30.254969],[119.732884,30.254839],[119.732863,30.2547],[119.732863,30.254543],[119.732852,30.254385],[119.732831,30.254191],[119.73282,30.254024],[119.732595,30.254042],[119.732326,30.254079],[119.732176,30.25407],[119.732187,30.253913],[119.732187,30.253755],[119.732224,30.25357],[119.732149,30.253403],[119.732021,30.253255],[119.731838,30.253106],[119.731699,30.252958],[119.731559,30.25281],[119.731484,30.252662],[119.731409,30.252541],[119.731248,30.252652],[119.731055,30.252587],[119.730851,30.252578],[119.730669,30.252597],[119.730486,30.252569],[119.730325,30.252522],[119.730315,30.252671],[119.730325,30.252884],[119.730315,30.253125],[119.730325,30.25331],[119.73039,30.253477],[119.730476,30.253635],[119.730583,30.253839],[119.730669,30.253978],[119.730733,30.254163],[119.73083,30.254367],[119.730926,30.254506],[119.730937,30.254645],[119.730969,30.254765],[119.731001,30.254895]],[[119.727166,30.257471],[119.727391,30.257481],[119.727584,30.257508],[119.727767,30.257508],[119.72796,30.257536],[119.728185,30.257527],[119.728421,30.257518],[119.728614,30.257518],[119.728839,30.257518],[119.729065,30.257499],[119.729172,30.257499],[119.729161,30.257647],[119.729172,30.257786],[119.729161,30.25799],[119.729151,30.258176],[119.729129,30.258361],[119.72914,30.258509],[119.729204,30.258704],[119.729236,30.258908],[119.729247,30.259084],[119.729204,30.259223],[119.729135,30.259371],[119.729167,30.25951],[119.729102,30.259733],[119.728877,30.259788],[119.728695,30.259788],[119.728491,30.259788],[119.728319,30.259807],[119.728137,30.259816],[119.727997,30.259834],[119.727858,30.259797],[119.727697,30.259807],[119.727536,30.259788],[119.727611,30.259658],[119.727686,30.259556],[119.727751,30.259436],[119.727826,30.259297],[119.727901,30.259158],[119.727965,30.259037],[119.727987,30.258889],[119.727954,30.25875],[119.727783,30.25862],[119.727643,30.258491],[119.727429,30.258454],[119.727214,30.258426],[119.726999,30.258444],[119.726817,30.258444],[119.726688,30.258398],[119.72657,30.258287],[119.726474,30.258166],[119.72657,30.258046],[119.726688,30.257907],[119.726828,30.257814],[119.726924,30.257647],[119.72701,30.257545]],[[119.722252,30.259964],[119.722424,30.259973],[119.722595,30.259992],[119.722767,30.260001],[119.722992,30.260001],[119.723175,30.26002],[119.723464,30.260038],[119.723314,30.260011],[119.723582,30.259992],[119.723722,30.260001],[119.723808,30.259909],[119.723775,30.259751],[119.723797,30.259621],[119.723894,30.259538],[119.723872,30.25938],[119.723851,30.259204],[119.723894,30.259028],[119.723947,30.25888],[119.72399,30.258713],[119.724012,30.25862],[119.72414,30.258556],[119.724242,30.258472],[119.72436,30.258398],[119.724435,30.258287],[119.724307,30.25825],[119.724092,30.25825],[119.72391,30.25825],[119.723716,30.25825],[119.723545,30.258231],[119.723362,30.258241],[119.723148,30.258231],[119.722933,30.25825],[119.722847,30.258315],[119.722762,30.258407],[119.722687,30.258546],[119.722633,30.25863],[119.722558,30.258732],[119.72244,30.258834],[119.722354,30.258945],[119.722257,30.259102],[119.722214,30.259232],[119.722204,30.259417],[119.722225,30.259547],[119.722214,30.259686],[119.722236,30.259816]]]}]');
var DISTANCE = 10;
var currentAreas = []

var infoContainer = document.querySelector("#bottom_info");
if (infoContainer) {
    infoContainer.onclick = function (e) {
        window.location.href="http://bg.zafu.edu.cn/sub/0104/172/?menu_id="+infoContainer.area_id;
    }
}

function lightArea() {
    var interval = setInterval(function () {
        var areas = currentAreas;
        if (areas) {
            areas.forEach(function (it) {
                if (it && it.polygons) {
                    it.polygons.forEach(function (item) {
                        if (!item.ratio) {
                            item.shadeCnt = 6;
                            item.ratio = 1;
                        }
                        var options = item.getOptions();
                        options.fillOpacity += 0.1 * item.ratio;
                        if (options.fillOpacity >= 0.7 || options.fillOpacity <= 0.48) {
                            item.ratio *= -1;
                            item.shadeCnt--;
                            if (item.shadeCnt <= 0) {
                                item.ratio = null
                                item.shadeCnt = null
                                clearInterval(interval)
                            }
                        }
                        item.setOptions(options);
                    })
                }
            })
        }
    }, 50)
}

function renderArea(areas) {
    if (areas) {
        currentAreas = areas;
        areas.forEach(function (area) {
            area.polygons = []
            var p = area.p;
            if (p) {
                p.forEach(function (item) {
                    if (item) {
                        var path = []
                        item.forEach(function (pos) {
                            path.push(new AMap.LngLat(pos[0], pos[1]))
                        })
                        var polygon = new AMap.Polygon({
                            path: path,
                            fillColor: '#39cbef', // 多边形填充颜色
                            fillOpacity: 0.48,
                            strokeWeight: 0.1, // 线条宽度，默认为 1
                            strokeColor: '#39cbef', // 线条颜色
                            strokeOpacity: 0,
                            bubble: true,
                        });
                        area.polygons.push(polygon);
                        map.add(polygon);
                    }
                })
            }
        })
    }
    lightArea()
}

function clearAreas(areas) {
    if (areas) {
        areas.forEach(function (it) {
            if (it && it.polygons) {
                it.polygons.forEach(function (item) {
                    map.remove(item)
                })
            }
        })
    }
    var container = document.querySelector("#bottom_info");
    container.style.display='none';
}

function onAreaClick(area) {
    var nameText = document.querySelector("#area_name");
    var descText = document.querySelector("#area_desc");
    var container = document.querySelector("#bottom_info");
    container.area_id = area.id;
    container.style.display='block';
    nameText.innerText=area.name;
    descText.innerText = desc[area.id];
}

map.on('click', function (e) {
    var lng = e.lnglat.getLng();
    var lat = e.lnglat.getLat();
    var pos = [lng, lat];
    var minArea = [];
    var handled;
    data.forEach(function (pi) {
        var p = pi.p;
        if (!handled && p) {
            p.forEach(function (item) {
                if (!handled && pointInPoly(pos, item)) {
                    if (currentAreas) {
                        if (currentAreas.indexOf(pi) != -1) {
                            onAreaClick(pi);
                            handled = true;
                        }
                    }
                    minArea.push(pi);
                }
            })
        }
    })

    if (handled) return;

    if (minArea.length == 0) {
        var clickPos = new AMap.LngLat(lng, lat);
        var bounds = new AMap.Bounds(clickPos.offset(-DISTANCE, -DISTANCE), clickPos.offset(DISTANCE, DISTANCE));
        data.forEach(function (pi) {
            var p = pi.p;
            if (p) {
                p.forEach(function (item) {
                    item.forEach(function (point) {
                        if (bounds.contains(new AMap.LngLat(point[0], point[1]))) {
                            if (minArea.indexOf(pi) < 0) {
                                minArea.push(pi)
                            }
                        }
                    })
                })
            }
        })
    }
    clearAreas(currentAreas);
    renderArea(minArea)
})

function pointInPoly(pt, poly) {
    for (var c = false, i = -1, l = poly.length, j = l - 1; ++i < l; j = i)
        ((poly[i][1] <= pt[1] && pt[1] < poly[j][1]) || (poly[j][1] <= pt[1] && pt[1] < poly[i][1]))
        && (pt[0] < (poly[j][0] - poly[i][0]) * (pt[1] - poly[i][1]) / (poly[j][1] - poly[i][1]) + poly[i][0])
        && (c = !c);
    return c;
}
